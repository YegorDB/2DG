!function e(t,s,i){function n(a,o){if(!s[a]){if(!t[a]){var h="function"==typeof require&&require;if(!o&&h)return h(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var m=s[a]={exports:{}};t[a][0].call(m.exports,(function(e){return n(t[a][1][e]||e)}),m,m.exports,e,t,s,i)}return s[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)n(i[a]);return n}({1:[function(e,t,s){const i={createSvgElement:e=>document.createElementNS("http://www.w3.org/2000/svg",e)};class n{static validate(e){if(!(e instanceof n))throw Error("Value has to be an instance of Dimensions.")}constructor(e,t){this._width=e,this._height=t}get width(){return this._width}get height(){return this._height}}t.exports={UTILS:i,Dimensions:n}},{}],2:[function(e,t,s){const{CanvasLayer:i}=e("../../layers/canvas/main"),{PolygonPoints:n}=e("../../points");t.exports={CanvasPolygon:class{constructor(e,t=null){t=t||{},this.points=e,this._options={stroke:t.stroke||!0,fill:t.fill,params:{strokeStyle:"#000",fillStyle:"#000",globalAlpha:1,lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,...t.params||{}}}}get points(){return this._points}set points(e){this._points=e instanceof n?e:new n(e)}get layer(){return this._layer}set layer(e){if(!(e instanceof i))throw Error("Layer has to be instance of CanvasLayer.");this._layer=e}draw(){if(!this.layer)throw Error("Object has no layer to draw to.");let e=new Path2D(this.points.path);this._setParams(),this._options.stroke&&this.layer.ctx.stroke(e),this._options.fill&&this.layer.ctx.fill(e)}_setParams(){for(let[e,t]of Object.entries(this._options.params))this.layer.ctx[e]=t}}}},{"../../layers/canvas/main":6,"../../points":9}],3:[function(e,t,s){t.exports={canvas:e("./canvas/main"),svg:e("./svg/main")}},{"./canvas/main":2,"./svg/main":4}],4:[function(e,t,s){const{UTILS:i}=e("../../base");t.exports={SVGItem:class{constructor(e,t){this.element=i.createSvgElement(e);for(let[e,s]of Object.entries(t||{}))this.element.setAttribute(e,s)}getAttr(e){return this.element.getAttribute(e)}setAttr(e,t){this.element.setAttribute(e,t)}}}},{"../../base":1}],5:[function(e,t,s){const{Dimensions:i}=e("../base");t.exports={BaseLayer:class{constructor(){this.element=this.createElement(),this.items={},this._zIndex=null,this._initialZIndex=null,this._isShowed=!0}get dimensions(){return this._dimensions}set dimensions(e){i.validate(e),this._dimensions=e}get isShowed(){return this._isShowed}get zIndex(){return this._zIndex}set zIndex(e){if(!Number.isInteger(e))throw Error("Z-index value has to be an integer.");null===this._initialZIndex&&(this._initialZIndex=e),this.element.style.zIndex=e,this._zIndex=e}resetZIndex(){null!==this._initialZIndex&&(this.zIndex=this._initialZIndex)}createElement(){let e=this._createElement();return e.style.position="absolute",e.style.top="0px",e.style.left="0px",e}_createElement(){}show(){this._isShowed=!0,this.element.style.display="block"}hide(){this._isShowed=!1,this.element.style.display="none"}addItem(e,t){if(e in this.items)throw Error(`Item with name "${e}" already exists.`);this.items[e]=t}removeItem(e){if(!(e in this.items))throw Error(`Item with name "${e}" does not exist.`);this._removeItemAdditional(this.items[e]),delete this.items[e]}_removeItemAdditional(e){}}}},{"../base":1}],6:[function(e,t,s){const{BaseLayer:i}=e("../base"),{Dimensions:n}=e("../../base");t.exports={CanvasLayer:class extends i{constructor(){super(),this.ctx=this.element.getContext("2d")}set dimensions(e){super.dimensions=e,this.element.width=e.width,this.element.height=e.height}addItem(e,t){super.addItem(e,t),t.layer=this,t.draw()}removeItem(e){super.removeItem(e),this.refresh()}refresh(){this.clear();for(let e of this.items)e.draw()}clear(){this.ctx.clearRect(0,0,this.dimensions.width,this.dimensions.height)}_createElement(){return document.createElement("canvas")}}}},{"../../base":1,"../base":5}],7:[function(e,t,s){t.exports={base:e("./base"),canvas:e("./canvas/main"),svg:e("./svg/main")}},{"./base":5,"./canvas/main":6,"./svg/main":8}],8:[function(e,t,s){const{BaseLayer:i}=e("../base"),{Dimensions:n,UTILS:r}=e("../../base");t.exports={SVGLayer:class extends i{set dimensions(e){super.dimensions=e,this.element.style.width=e.width+"px",this.element.style.height=e.height+"px"}addItem(e,t){super.addItem(e,t),this.element.appendChild(t.element)}_removeItemAdditional(e){e.element.remove(),e.element=null}_createElement(){return r.createSvgElement("svg")}}}},{"../../base":1,"../base":5}],9:[function(e,t,s){class i{static validateCoordinate(e){if(!Number.isInteger(e))throw Error("Point coordinate has to be an integer.")}static validateCoordinates(e,t){i.validateCoordinate(e),i.validateCoordinate(t)}constructor(e,t){i.validateCoordinates(e,t),this._x=e,this._y=t}[Symbol.toPrimitive](e){return"string"===e?`${this.x},${this.y}`:null}get x(){return this._x}get y(){return this._y}}class n{static validateItems(e){if(!Array.isArray(e))throw Error("Points items has to be an Array instance.");for(let t of e){if(!Array.isArray(t)||2!=t.length)throw Error("Point coordinates has to be array of two integers.");i.validateCoordinates(...t)}}constructor(e){this.items=e}*[Symbol.iterator](){for(let e of this.items)yield e}get items(){return this._items}set items(e){n.validateItems(e),this._items=this._createItems(e)}get path(){return this.items.map((e,t)=>`${0===t?"M":"L"} ${e}`).join(" ")}_createItems(e){return e.map(e=>new i(...e))}}class r extends n{static validateItems(e){if(n.validateItems(e),e.length<3||3==e.length&&e[0][0]==e[e.length-1][0]&&e[0][1]==e[e.length-1][1])throw Error("Polygon points array has to include at least 3 items.")}get items(){return super.items}set items(e){r.validateItems(e);let t=e.length-1;e[0][0]==e[t][0]&&e[0][1]==e[t][1]||e.push(e[0]),this._items=this._createItems(e)}}t.exports={Point:i,Points:n,PolygonPoints:r}},{}],10:[function(e,t,s){const{Dimensions:i}=e("./base");t.exports={Screen:class{constructor(e,t){this.element=document.getElementById(e),this.element.style.position="relative",t=t||{};let[s,n]=t.dimensions||[100,100];this.dimensions=new i(s,n),this.layers={},this._activeLayerName=null}get dimensions(){return this._dimensions}set dimensions(e){i.validate(e),this._dimensions=e,this.element.style.width=e.width+"px",this.element.style.height=e.height+"px"}addLayer(e,t){if(e in this.layers)throw Error(`Layer with name "${e}" already exists.`);t.zIndex=Object.keys(this.layers).length,t.dimensions=this.dimensions,this.layers[e]=t,this.element.appendChild(t.element),this._activeLayerName&&this.activateLayer(this._activeLayerName)}activateLayer(e){if(!(e in this.layers))throw Error(`Layer with name "${e}" does not exist.`);this.deactivateLayer(),this.layers[e].zIndex=Object.keys(this.layers).length,this._activeLayerName=e}deactivateLayer(){null!=this._activeLayerName&&(this.layers[this._activeLayerName].resetZIndex(),this._activeLayerName=null)}}}},{"./base":1}],11:[function(e,t,s){window.TDG={base:e("./base"),items:e("./items/main"),layers:e("./layers/main"),screen:e("./screen")}},{"./base":1,"./items/main":3,"./layers/main":7,"./screen":10}]},{},[11]);