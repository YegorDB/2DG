var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.superClass_=b.prototype};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Object.entries",function(a){return a?a:function(a){var b=[],d;for(d in a)$jscomp.owns(a,d)&&b.push([d,a[d]]);return b}},"es8","es3");$jscomp.polyfill("Number.isFinite",function(a){return a?a:function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a}},"es6","es3");$jscomp.polyfill("Number.isInteger",function(a){return a?a:function(a){return Number.isFinite(a)?a===Math.floor(a):!1}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
var UTILS={createSvgElement:function(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}},SVGItem=function(a,b){this.element=UTILS.createSvgElement(a);a=$jscomp.makeIterator(Object.entries(b||{}));for(b=a.next();!b.done;b=a.next()){var c=$jscomp.makeIterator(b.value);b=c.next().value;c=c.next().value;this.element.setAttribute(b,c)}};SVGItem.prototype.getAttr=function(a){return this.element.getAttribute(a)};SVGItem.prototype.setAttr=function(a,b){this.element.setAttribute(a,b)};
var BaseLayer=function(){this.element=this._createElement();this.element.classList.add("tdg-layer");this._initialZIndex=null;this._isShowed=!0};BaseLayer.prototype._createElement=function(){};BaseLayer.prototype.setDimensions=function(a,b){};BaseLayer.prototype.setZIndex=function(a){if(!Number.isInteger(a))throw Error("Z-index value has to be an integer.");null==this._initialZIndex&&(this._initialZIndex=a);this.element.style.zIndex=a};
BaseLayer.prototype.resetZIndex=function(){null!=this._initialZIndex&&(this.element.style.zIndex=this._initialZIndex)};BaseLayer.prototype.show=function(){this._isShowed=!0;this.element.classList.remove("tdg-hide")};BaseLayer.prototype.hide=function(){this._isShowed=!1;this.element.classList.add("tdg-hide")};$jscomp.global.Object.defineProperties(BaseLayer.prototype,{isShowed:{configurable:!0,enumerable:!0,get:function(){return this._isShowed}}});
var CanvasLayer=function(){BaseLayer.call(this);this.ctx=this.element.getContext("2d")};$jscomp.inherits(CanvasLayer,BaseLayer);CanvasLayer.prototype._createElement=function(){return document.createElement("canvas")};CanvasLayer.prototype.setDimensions=function(a,b){this.element.width=a;this.element.height=b};var SVGLayer=function(){BaseLayer.call(this);this.items={}};$jscomp.inherits(SVGLayer,BaseLayer);SVGLayer.prototype._createElement=function(){return UTILS.createSvgElement("svg")};
SVGLayer.prototype.setDimensions=function(a,b){this.element.style.width=a+"px";this.element.style.height=b+"px"};SVGLayer.prototype.addItem=function(a,b){if(a in this.items)throw Error('Item with name "'+a+'" already exists.');this.items[a]=b;this.element.appendChild(b.element)};SVGLayer.prototype.removeItem=function(a){if(!(a in this.items))throw Error('Item with name "'+a+'" does not exist.');this.items[a].element.remove();this.items[a].element=null;delete this.items[a]};
var Composition=function(a,b){this.element=document.getElementById(a);this.element.classList.add("tdg-composition");b=b||{};a=b.dimensions||[100,100];this.dimensions={_width:a[0],get width(){return this._width},_height:a[1],get height(){return this._height}};this._setDimensions();this.layers={};this._activeLayerName=null};Composition.prototype._setDimensions=function(){this.element.style.width=this.dimensions.width+"px";this.element.style.height=this.dimensions.height+"px"};
Composition.prototype.addLayer=function(a,b){if(a in this.layers)throw Error('Layer with name "'+a+'" already exists.');b.setZIndex(Object.keys(this.layers).length);b.setDimensions(this.dimensions.width,this.dimensions.height);this.layers[a]=b;this.element.appendChild(b.element);this._activeLayerName&&this.activateLayer(this._activeLayerName)};
Composition.prototype.activateLayer=function(a){if(!(a in this.layers))throw Error('Layer with name "'+a+'" does not exist.');this.deactivateLayer();this.layers[a].setZIndex(Object.keys(this.layers).length);this._activeLayerName=a};Composition.prototype.deactivateLayer=function(){null!=this._activeLayerName&&(this.layers[this._activeLayerName].resetZIndex(),this._activeLayerName=null)};